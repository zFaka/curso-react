{"ast":null,"code":"import { db } from \"../firebase/firebase-config\";\nimport { loadNotes } from \"../helpers/loadNotes\";\nimport { types } from \"../types/types\";\nexport const startNewNote = () => {\n  return async (dispatch, getState) => {\n    const uid = getState().auth.uid;\n    const newNote = {\n      title: '',\n      body: '',\n      date: new Date().getTime()\n    }; // doc is the Document Reference from Firbase Database\n\n    const doc = await db.collection(`${uid}/journal/notes`).add(newNote);\n    dispatch(activeNote(doc.id, newNote));\n  };\n};\nexport const activeNote = (id, note) => ({\n  type: types.notesActive,\n  payload: {\n    id,\n    ...note\n  }\n});\nexport const startLoadingNotes = uid => {\n  return async dispatch => {\n    const notes = await loadNotes(uid);\n    dispatch(setNotes(notes));\n  };\n};\nexport const setNotes = notes => ({\n  type: types.notesLoad,\n  payload: notes\n});\nexport const startSaveNote = note => {\n  return async (dispatch, getState) => {\n    const {\n      uid\n    } = getState().auth;\n\n    if (!note.url) {\n      delete note.url;\n    }\n\n    const noteToFirestore = { ...note\n    };\n    delete noteToFirestore.id;\n    await db.doc(`${uid}/journal/notes/${note.id}`).update(noteToFirestore);\n    dispatch(refreshNote(note.id, note));\n  };\n};\nexport const refreshNote = (id, note) => ({\n  type: types.notesUpdated,\n  payload: {\n    id,\n    note\n  }\n});","map":{"version":3,"sources":["/home/f/Documents/curso-react/08-journal-app/src/actions/notes.js"],"names":["db","loadNotes","types","startNewNote","dispatch","getState","uid","auth","newNote","title","body","date","Date","getTime","doc","collection","add","activeNote","id","note","type","notesActive","payload","startLoadingNotes","notes","setNotes","notesLoad","startSaveNote","url","noteToFirestore","update","refreshNote","notesUpdated"],"mappings":"AAAA,SAAQA,EAAR,QAAiB,6BAAjB;AACA,SAAQC,SAAR,QAAwB,sBAAxB;AACA,SAAQC,KAAR,QAAoB,gBAApB;AAEA,OAAO,MAAMC,YAAY,GAAG,MAAM;AAEhC,SAAO,OAAMC,QAAN,EAAgBC,QAAhB,KAA6B;AAElC,UAAMC,GAAG,GAAGD,QAAQ,GAAGE,IAAX,CAAgBD,GAA5B;AAEA,UAAME,OAAO,GAAG;AACdC,MAAAA,KAAK,EAAC,EADQ;AAEdC,MAAAA,IAAI,EAAE,EAFQ;AAGdC,MAAAA,IAAI,EAAE,IAAIC,IAAJ,GAAWC,OAAX;AAHQ,KAAhB,CAJkC,CAUlC;;AAEA,UAAMC,GAAG,GAAG,MAAMd,EAAE,CAACe,UAAH,CAAe,GAAET,GAAI,gBAArB,EACfU,GADe,CACXR,OADW,CAAlB;AAGAJ,IAAAA,QAAQ,CAACa,UAAU,CAACH,GAAG,CAACI,EAAL,EAASV,OAAT,CAAX,CAAR;AACD,GAhBD;AAiBD,CAnBM;AAuBP,OAAO,MAAMS,UAAU,GAAG,CAACC,EAAD,EAAKC,IAAL,MAAe;AAEvCC,EAAAA,IAAI,EAAClB,KAAK,CAACmB,WAF4B;AAGvCC,EAAAA,OAAO,EAAC;AACNJ,IAAAA,EADM;AAEN,OAAGC;AAFG;AAH+B,CAAf,CAAnB;AAWP,OAAO,MAAMI,iBAAiB,GAAIjB,GAAD,IAAS;AACxC,SAAO,MAAMF,QAAN,IAAmB;AAExB,UAAMoB,KAAK,GAAG,MAAMvB,SAAS,CAACK,GAAD,CAA7B;AACAF,IAAAA,QAAQ,CAACqB,QAAQ,CAACD,KAAD,CAAT,CAAR;AAA0B,GAH5B;AAID,CALM;AASP,OAAO,MAAMC,QAAQ,GAAID,KAAD,KAAY;AAElCJ,EAAAA,IAAI,EAAClB,KAAK,CAACwB,SAFuB;AAGlCJ,EAAAA,OAAO,EAACE;AAH0B,CAAZ,CAAjB;AAQP,OAAO,MAAMG,aAAa,GAAIR,IAAD,IAAU;AAErC,SAAO,OAAMf,QAAN,EAAgBC,QAAhB,KAA6B;AAElC,UAAM;AAACC,MAAAA;AAAD,QAAQD,QAAQ,GAAGE,IAAzB;;AACA,QAAG,CAACY,IAAI,CAACS,GAAT,EAAa;AAAC,aAAOT,IAAI,CAACS,GAAZ;AAAgB;;AAC9B,UAAMC,eAAe,GAAG,EAAC,GAAGV;AAAJ,KAAxB;AACA,WAAOU,eAAe,CAACX,EAAvB;AAEA,UAAMlB,EAAE,CAACc,GAAH,CAAQ,GAAER,GAAI,kBAAiBa,IAAI,CAACD,EAAG,EAAvC,EAA0CY,MAA1C,CAAiDD,eAAjD,CAAN;AAEAzB,IAAAA,QAAQ,CAAC2B,WAAW,CAACZ,IAAI,CAACD,EAAN,EAAUC,IAAV,CAAZ,CAAR;AACD,GAVD;AAWD,CAbM;AAgBP,OAAO,MAAMY,WAAW,GAAG,CAACb,EAAD,EAAKC,IAAL,MAAe;AAEtCC,EAAAA,IAAI,EAAClB,KAAK,CAAC8B,YAF2B;AAGtCV,EAAAA,OAAO,EAAC;AACJJ,IAAAA,EADI;AAEJC,IAAAA;AAFI;AAH8B,CAAf,CAApB","sourcesContent":["import {db} from \"../firebase/firebase-config\";\nimport {loadNotes} from \"../helpers/loadNotes\";\nimport {types} from \"../types/types\";\n\nexport const startNewNote = () => {\n\n  return async(dispatch, getState) => {\n\n    const uid = getState().auth.uid; \n\n    const newNote = {\n      title:'', \n      body: '', \n      date: new Date().getTime()\n    }\n\n    // doc is the Document Reference from Firbase Database\n\n    const doc = await db.collection(`${uid}/journal/notes`)\n      .add(newNote)\n\n    dispatch(activeNote(doc.id, newNote))\n  }\n}\n\n\n\nexport const activeNote = (id, note) => ({\n\n  type:types.notesActive, \n  payload:{\n    id,\n    ...note\n  }\n});\n\n\n\nexport const startLoadingNotes = (uid) => {\n  return async(dispatch) => {\n\n    const notes = await loadNotes(uid)\n    dispatch(setNotes(notes))}\n}\n\n\n\nexport const setNotes = (notes) => ({\n\n  type:types.notesLoad, \n  payload:notes\n})\n\n\n\nexport const startSaveNote = (note) => {\n\n  return async(dispatch, getState) => {\n      \n    const {uid} = getState().auth; \n    if(!note.url){delete note.url}\n    const noteToFirestore = {...note};\n    delete noteToFirestore.id;\n\n    await db.doc(`${uid}/journal/notes/${note.id}`).update(noteToFirestore);\n\n    dispatch(refreshNote(note.id, note))\n  }\n}\n\n\nexport const refreshNote = (id, note) => ({\n    \n    type:types.notesUpdated, \n    payload:{\n        id, \n        note\n    }\n})\n"]},"metadata":{},"sourceType":"module"}